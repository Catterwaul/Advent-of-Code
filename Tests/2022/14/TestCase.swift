import AOC
import AOC_2022_14
import XCTest

final class TestCase: XCTestCase {
  func test() {
    let input = """
      498,4 -> 498,6 -> 496,6
      503,4 -> 502,4 -> 502,9 -> 494,9

      """
      .lines

    let grid = Grid<SandGrain>(input, infiniteFloor: false)
    XCTAssertEqual(grid.sandGrainCount, 24)
    XCTAssertEqual(
      grid.picture,
      """
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈ­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъфе
      ­Ъње­Ъње­ЪњеРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъње
      ­Ъње­Ъње­Ъфе­Ъфе­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъње
      ­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъње
      ­ЪњеРїЏ№ИЈ­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъње
      ­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъње
      """
    )

    let expandingGrid = Grid<ExpandingSandGrain>(input, infiniteFloor: true)
    XCTAssertEqual(expandingGrid.sandGrainCount, 93)
    XCTAssertEqual(
      expandingGrid.picture,
      """
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­ЪфеРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъфе­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње
      ­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње
      ­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње
      ­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­ЪфеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње
      РїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ­Ъње­Ъње­Ъње­Ъње­Ъње­Ъње­ЪњеРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈРїЏ№ИЈ
      ­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе­Ъфе
      """
    )
  }

  func test_part1() throws {
    let grid = Grid<SandGrain>(try String.input().lines, infiniteFloor: false)
    XCTAssertEqual(grid.sandGrainCount, 1133)
    print(grid.picture)
  }

  func test_part2() throws {
    let grid = Grid<ExpandingSandGrain>(try String.input().lines, infiniteFloor: true)
    XCTAssertEqual(grid.sandGrainCount, 27566)
    print(grid.picture)
  }
}
